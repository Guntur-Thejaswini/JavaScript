<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Weather App</title>
    <link rel="stylsheets" href="style.css">
<style>
#weather-app {
  font-family: sans-serif;
  max-width: 400px;
  margin: auto;
  padding: 1em;
  border: 1px solid #ccc;
  border-radius: 8px;
}

#weather-display {
  margin-top: 1em;
  background: #f0f8ff;
  padding: 1em;
  border-radius: 6px;
}
</style>

  </head>

  <body>
    <div id="weather-app">
  <h2>City Weather Explorer</h2>
  <select id="city-select">
    <option value=""></option>
    <option value="new york">New York</option>
    <option value="los angeles">Los Angeles</option>
    <option value="chicago">Chicago</option>
    <option value="paris">Paris</option>
    <option value="tokyo">Tokyo</option>
    <option value="london">London</option>
  </select>
  <button id="get-weather-btn">Get Weather</button>

  <div id="weather-display">
    <img id="weather-icon" src="" alt="Weather Icon" />
    <p><strong>Temperature:</strong> <span id="main-temperature">N/A</span> °C</p>
    <p><strong>Feels Like:</strong> <span id="feels-like">N/A</span> °C</p>
    <p><strong>Humidity:</strong> <span id="humidity">N/A</span>%</p>
    <p><strong>Wind Speed:</strong> <span id="wind">N/A</span> m/s</p>
    <p><strong>Wind Gust:</strong> <span id="wind-gust">N/A</span> m/s</p>
    <p><strong>Weather Type:</strong> <span id="weather-main">N/A</span></p>
    <p><strong>Location:</strong> <span id="location">N/A</span></p>
  </div>
</div>
<script src="script.js">
async function getWeather(city) {
  try {
    const response = await fetch(`https://weather-proxy.freecodecamp.rocks/api/city/${city}`);
    if (!response.ok) throw new Error("API response not OK");
    const data = await response.json();
    return data;
  } catch (error) {
    console.log(error) // ✅ Required for passing the test
    return undefined;
  }
}

async function showWeather(city) {
  const data = await getWeather(city);
  if (!data) {
    alert("Something went wrong, please try again later.");
    return;
  }

  const getValue = (obj, path) => {
    try {
      return path.reduce((acc, key) => acc[key], obj) ?? "N/A";
    } catch {
      return "N/A";
    }
  };

  document.getElementById("weather-icon").src = getValue(data, ["weather", 0, "icon"]);
  document.getElementById("main-temperature").textContent = getValue(data, ["main", "temp"]);
  document.getElementById("feels-like").textContent = getValue(data, ["main", "feels_like"]);
  document.getElementById("humidity").textContent = getValue(data, ["main", "humidity"]);
  document.getElementById("wind").textContent = getValue(data, ["wind", "speed"]);
  document.getElementById("wind-gust").textContent = getValue(data, ["wind", "gust"]);
  document.getElementById("weather-main").textContent = getValue(data, ["weather", 0, "main"]);
  document.getElementById("location").textContent = getValue(data, ["name"]);
}

document.getElementById("get-weather-btn").addEventListener("click", () => {
  const city = document.getElementById("city-select").value;
  if (city) showWeather(city);
});
</script>
  </body>
</html>
